<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Design - Evelyn's Portfolio</title>
    
    <style>
        /* =========================================
           1. å­—ä½“ä¸åŸºç¡€è®¾ç½®
           ========================================= */
        @font-face {
            font-family: 'InstrumentSans-Regular';
            src: url('../assets/fonts/InstrumentSans-Regular.ttf') format('truetype');
        }
        @font-face {
            font-family: 'PuHuiTi';
            src: url('../assets/fonts/Alibaba-PuHuiTi-Light.otf') format('opentype');
        }
        @font-face {
            font-family: 'BebasNeue';
            src: url('../assets/fonts/BebasNeueRegular-gxj83.ttf') format('truetype');
        }

        :root {
            /* æ ¸å¿ƒå“ç‰Œè‰² */
            --color-pink: #f9a7e3;      
            --color-mint: #0ffdbb;
            --color-gray: #dbdbd9;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            font-family: 'InstrumentSans-Regular', 'PuHuiTi', sans-serif;
            overflow-x: hidden;
            color: #000;
        }

        /* å¯¼èˆª UI (çº¯è‰²è¾¹ç¼˜å‘å…‰) */
        .nav-back {
            position: fixed;
            top: 40px;
            left: 40px;
            z-index: 100;
            text-decoration: none;
            font-size: 18px;
            font-weight: bold;
            color: #000; 
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            opacity: 0.7;
        }
        /* æ‚¬åœå‘å…‰æ•ˆæœ */
        .nav-back:hover { 
            opacity: 1; 
            color: var(--color-mint); 
            text-shadow: 0 0 10px rgba(15, 253, 187, 0.8);
        }

        /* ğŸ”´ ä¿®æ”¹ï¼šå³ä¸Šè§’æ ‡é¢˜æ”¹ä¸ºç°è‰²å­—ä½“ï¼Œæ— èƒŒæ™¯ */
        .page-title-fixed {
            position: fixed;
            top: 40px;
            right: 40px;
            z-index: 100;
            font-size: 14px;
            color: #666; /* ç°è‰²å­—ä½“ */
            font-family: 'PuHuiTi', sans-serif;
            font-weight: bold;
            /* ç§»é™¤èƒŒæ™¯è‰²å’Œpadding */
        }

        /* =========================================
           2. é¡µé¢å®¹å™¨
           ========================================= */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 120px 40px 100px;
        }

        .section-header {
            margin-bottom: 80px;
        }
        .section-header h1 {
            font-family: 'BebasNeue', sans-serif;
            font-size: 80px;
            margin: 0;
            line-height: 0.9;
            color: #000;
        }
        .section-header p {
            font-size: 18px;
            color: #666;
            margin-top: 10px;
            font-family: 'InstrumentSans-Regular', sans-serif;
        }

        /* æ¸¸æˆåˆ—è¡¨ Grid */
        .game-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 100px;
        }

        /* å•ä¸ªæ¸¸æˆå¡ç‰‡å®¹å™¨ */
        .game-card {
            display: flex;
            gap: 60px;
            align-items: center;
            perspective: 1000px;
        }
        
        .game-card:nth-child(even) {
            flex-direction: row-reverse;
        }

        /* =========================================
           3. æ¸¸æˆäº¤äº’åŒºåŸŸ (å»é™¤ç¡¬è¾¹)
           ========================================= */
        .game-visual {
            flex: 1.5;
            height: 450px;
            background: #fff;
            border-radius: 12px; /* åœ†è§’ */
            position: relative;
            overflow: hidden;
            /* æŸ”å’ŒæŠ•å½± */
            box-shadow: 0 20px 40px rgba(0,0,0,0.08);
            cursor: pointer;
        }
        
        .game-visual img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            pointer-events: none;
            position: relative; 
            z-index: 0;
        }

        /* ğŸ”´ ä¿®æ”¹ï¼šäº¤äº’æç¤ºæ–‡å­—æ”¹ä¸ºç™½åº•é»‘å­— */
        .interaction-hint {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9); /* ç™½åº• */
            color: #333; /* é»‘å­— */
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            pointer-events: none;
            opacity: 0.9;
            transition: opacity 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            z-index: 10;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); /* åŠ ä¸€ç‚¹é˜´å½±é˜²æ­¢åœ¨ç™½å›¾ä¸Šçœ‹ä¸æ¸… */
        }
        .game-visual:hover .interaction-hint {
            opacity: 0; 
        }

        /* --- Game 1: åŠ¨ç‚¹P --- */
        #visual-p { position: relative; transform-style: preserve-3d; }
        .balance-ball {
            position: absolute;
            top: 50%; left: 50%; 
            width: 40px; height: 40px;
            background: #000;
            border-radius: 50%;
            transform: translate(-50%, -50%); 
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            pointer-events: none;
            z-index: 2;
        }
        .balance-ball.dropping { animation: drop-bounce 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
        @keyframes drop-bounce {
            0% { transform: translate(var(--drop-x), var(--drop-y)); }
            40% { transform: translate(var(--drop-x), calc(-50% + 205px)); } 
            60% { transform: translate(var(--drop-x), calc(-50% + 100px)); } 
            80% { transform: translate(var(--drop-x), calc(-50% + 205px)); }
            90% { transform: translate(var(--drop-x), calc(-50% + 170px)); }
            100% { transform: translate(var(--drop-x), calc(-50% + 205px)); }
        }

        /* --- Game 2: äººï¼Œç§»åŠ¨ --- */
        #visual-human {
            background-color: #111;
            color: #fff;
            display: flex; justify-content: center; align-items: center;
            font-family: 'PuHuiTi', serif; font-weight: bold; font-size: 60px; letter-spacing: 20px;
            position: relative;
        }
        .element-char { 
            transition: color 0.3s, text-shadow 0.3s; 
            cursor: pointer; 
            position: relative; 
            z-index: 2;
            display: inline-block;
        }
        .element-char:hover { transform: scale(1.2); }
        .char-water { color: #8fd3f4; } 
        .char-wood { color: #a8edea; } 
        .char-fire { color: #ff9a9e; }
        
        /* å…ƒç´ ç²’å­ */
        .element-particle {
            position: absolute;
            font-size: 24px;
            pointer-events: none;
            animation: floatUpFade 1.5s forwards;
            z-index: 1;
        }
        @keyframes floatUpFade {
            0% { opacity: 1; transform: translate(0, 0) scale(0.5); }
            100% { opacity: 0; transform: translate(var(--dx), -100px) scale(1.2); }
        }

        /* --- Game 3: å°çŒ«å’ª --- */
        #visual-cat { background-color: #fff; }
        .cat-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); mix-blend-mode: hard-light;
            clip-path: circle(0px at 0 0); pointer-events: none;
            display: flex; justify-content: center; align-items: center;
            z-index: 5;
        }
        .cat-cursor-hint { color: #fff; font-weight: bold; font-size: 24px; }

        /* --- Game 4: ç¨»è·å¼¹å°„ --- */
        #visual-inari { 
            position: relative; 
            cursor: crosshair;
        }
        .inari-ball {
            position: absolute;
            width: 30px; height: 30px;
            background: #a8edea; /* è§å…‰è“/è–„è·è‰² */
            border: 3px solid #000;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 10px rgba(168, 237, 234, 0.8);
            z-index: 5;
            left: 50%; top: 80%;
        }

        /* =========================================
           4. æ¸¸æˆä¿¡æ¯åŒºåŸŸ (ä»…æ ‡é¢˜å¸¦èƒŒæ™¯è‰²)
           ========================================= */
        .game-info { flex: 1; padding: 20px; }
        
        .game-tag {
            font-size: 12px;
            font-weight: bold;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
            display: block;
        }

        /* æ¸¸æˆæ ‡é¢˜ï¼šç®€å•çš„èƒŒæ™¯è‰²ï¼Œæ— è¾¹æ¡†æ— é˜´å½± */
        .game-title {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 20px;
            line-height: 1.2;
            display: inline-block;
            padding: 4px 12px;
            color: #000;
            border-radius: 4px; /* æŸ”å’Œåœ†è§’ */
        }
        
        /* æ ‡é¢˜é¢œè‰²äº¤æ›¿ */
        .game-card:nth-child(odd) .game-title { background-color: var(--color-pink); }
        .game-card:nth-child(even) .game-title { background-color: var(--color-mint); }

        .game-desc {
            font-size: 16px;
            line-height: 1.6;
            color: #555;
            margin-bottom: 30px;
            margin-top: 10px;
        }
        
        /* ä¸‹è½½æŒ‰é’®ï¼šç®€æ´é»‘è‰²é£æ ¼ */
        .download-btn {
            display: inline-block;
            padding: 12px 28px;
            background-color: #000;
            color: #fff;
            text-decoration: none;
            font-size: 14px;
            font-weight: bold;
            border-radius: 30px; /* èƒ¶å›Šåœ†è§’ */
            transition: all 0.2s;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .download-btn:hover {
            background: #333;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        /* =========================================
           5. æç¤ºå¼¹çª— (Modal)
           ========================================= */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255,255,255,0.8);
            backdrop-filter: blur(5px);
            align-items: center;
            justify-content: center;
        }
        .modal.show {
            display: flex;
        }
        .modal-content {
            background-color: #fff;
            /* å»æ‰é»‘è¾¹å’Œç²‰é˜´å½± */
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            padding: 50px;
            text-align: center;
            position: relative;
            max-width: 400px;
            width: 80%;
            border-radius: 12px;
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes popIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 24px;
            color: #ccc;
            cursor: pointer;
            transition: color 0.2s;
        }
        .close-modal:hover { color: #000; }
        
        .modal-content h3 {
            margin-top: 0;
            font-family: 'BebasNeue', sans-serif;
            font-size: 32px;
            letter-spacing: 1px;
            margin-bottom: 20px;
            color: #000;
        }
        .modal-content p {
            font-size: 16px;
            line-height: 1.6;
            color: #333;
            margin: 10px 0;
        }
        .email-address {
            font-size: 20px;
            color: #000;
            display: block;
            margin: 20px 0;
            padding: 15px;
            background: #f4f4f4; /* æµ…ç°åº• */
            border-radius: 8px;
            font-family: 'InstrumentSans-Regular', monospace;
            user-select: text; 
        }
        .en-hint {
            font-size: 14px !important;
            color: #888 !important;
            margin-top: 20px !important;
        }

    </style>
</head>
<body>

    <!-- å¯¼èˆª -->
    <a href="../index.html" class="nav-back">â† BACK TO HOME</a>
    <div class="page-title-fixed">ç‹¬ç«‹æ¸¸æˆè®¾è®¡</div>

    <div class="container">
        <header class="section-header">
            <h1>PLAYGROUND</h1>
            <p>Experimental mechanics, physics, and weird ideas.</p>
        </header>

        <div class="game-grid">

            <!-- Game 1: åŠ¨ç‚¹p -->
            <div class="game-card">
                <div class="game-visual" id="visual-p">
                    <img src="../assets/images/game-p.png" alt="Point P" onerror="this.src='https://placehold.co/800x600/EEE/333?text=Point+P+Platformer'">
                    <div class="balance-ball" id="ball-p"></div>
                    <div class="interaction-hint">â— Hover to Move Ball</div>
                </div>
                <div class="game-info">
                    <span class="game-tag">2D Platformer / Physics</span><br>
                    <h2 class="game-title">åŠ¨ç‚¹pçš„å¥‡å¦™æ—…ç¨‹</h2>
                    <p class="game-desc">
                        ä¸€æ¬¾ä»¥åŠ¨é‡å®ˆæ’ä¸ºæ ¸å¿ƒç©æ³•çš„å¹³å°æ¸¸æˆã€‚ä½ ä¸å†ç›´æ¥æ§åˆ¶è§’è‰²è·³è·ƒï¼Œè€Œæ˜¯æ§åˆ¶è„šä¸‹çš„å¹³å°å€¾æ–œä¸ç§»åŠ¨ï¼Œåˆ©ç”¨ç‰©ç†æƒ¯æ€§å°†â€œç‚¹Pâ€ç”©å‘ç»ˆç‚¹ã€‚
                    </p>
                    <a href="#" class="download-btn">Get the Game</a>
                </div>
            </div>

            <!-- Game 2: äººï¼Œç§»åŠ¨ -->
            <div class="game-card">
                <div class="game-visual" id="visual-human">
                    <span class="element-char char-water">æ°´</span>
                    <span class="element-char char-wood">æœ¨</span>
                    <span class="element-char char-fire">ç«</span>
                    <img src="../assets/images/game-human.png" style="position:absolute; width:100%; height:100%; object-fit:cover; opacity:0.1; z-index:-1;" onerror="this.style.display='none'">
                    <div class="interaction-hint" style="color: #fff; background: rgba(0,0,0,0.5);">Hover Characters</div>
                </div>
                <div class="game-info">
                    <span class="game-tag">GameJam / Puzzle</span><br>
                    <h2 class="game-title">äººï¼Œç§»åŠ¨ (Human, Move)</h2>
                    <p class="game-desc">
                        æ–‡å­—æ´¾ GameJam ä½œå“ã€‚æ¸¸æˆä»¥â€œæ°´ç”Ÿæœ¨ï¼Œæœ¨ç”Ÿç«ï¼Œç«ç”Ÿæ°´â€åŠâ€œæ°´å…‹ç«â€ç­‰æ–‡å­—å«ä¹‰ä¸ºæ ¸å¿ƒæœºåˆ¶ã€‚ç©å®¶éœ€è¦åˆ©ç”¨æ±‰å­—çš„ç‰©ç†å±æ€§ï¼ˆå¦‚â€œæœ¨â€èƒ½æµ®æ°´ï¼Œâ€œç«â€èƒ½çƒ§æœ¨ï¼‰æ¥è§£å¼€è°œé¢˜ã€‚
                    </p>
                    <a href="#" class="download-btn">Get the Game</a>
                </div>
            </div>

            <!-- Game 3: å°çŒ«å’ª -->
            <div class="game-card">
                <div class="game-visual" id="visual-cat">
                    <img src="../assets/images/game-cat.png" alt="Cat Meme" onerror="this.src='https://placehold.co/800x600/ff9a9e/333?text=Cat+Meme+Maze'">
                    <div class="cat-overlay" id="cat-lens">
                        <div class="cat-cursor-hint">ğŸ˜º</div>
                    </div>
                    <div class="interaction-hint">Hover to Reveal</div>
                </div>
                <div class="game-info">
                    <span class="game-tag">Maze / Color Theory</span><br>
                    <h2 class="game-title">å°çŒ«å’ªä½ é€ƒä¸å‡ºæˆ‘çš„æ‰‹æŒå¿ƒçš„å“‡å’”å’”</h2>
                    <p class="game-desc">
                        2D è¿·å®«æ¸¸æˆï¼Œæ ¸å¿ƒç©æ³•æ˜¯â€œè‰²å½©å åŠ â€ã€‚åªæœ‰å½“ç©å®¶æ‹–åŠ¨ Meme çŒ«çŒ«æ»‘ç‰‡ï¼Œä½¿å…¶é¢œè‰²ä¸è¿·å®«è·¯å¾„æ­£ç¡®å åŠ æ—¶ï¼Œéšè—çš„é“è·¯æ‰ä¼šæ˜¾ç°ã€‚
                    </p>
                    <a href="#" class="download-btn">Get the Game</a>
                </div>
            </div>

            <!-- Game 4: ç¨»è·å¼¹å°„ -->
            <div class="game-card">
                <div class="game-visual" id="visual-inari">
                    <img src="../assets/images/game-inari.png" alt="Inari" onerror="this.src='https://placehold.co/800x600/a8edea/333?text=Inari+Catapult'">
                    <!-- ç®€æ˜“å¼¹çƒ -->
                    <div class="inari-ball" id="inari-ball"></div>
                    <div class="interaction-hint">Drag Ball to Shoot</div>
                </div>
                <div class="game-info">
                    <span class="game-tag">Action / Pinball</span><br>
                    <h2 class="game-title">ç¨»è·å¼¹å°„</h2>
                    <p class="game-desc">
                        åœ¨ä¼ ç»Ÿçš„é¼ æ ‡äº¤äº’ä¸Šåšæ–‡ç« ã€‚æŒ‰ä½é¼ æ ‡å‘åæ‹–æ‹½ï¼Œå°†é¼ æ ‡å…‰æ ‡æœ¬èº«ä½œä¸ºâ€œå¼¹ç â€å‘å°„å‡ºå»ï¼æ¨¡æ‹Ÿè‰ç§æ’­æ’’ï¼Œåœ¨æ°´æ½­é‡Œé“ºè‰å¹¶å‡»é€€æ€ªç‰©ã€‚
                    </p>
                    <a href="#" class="download-btn">Get the Game</a>
                </div>
            </div>

        </div>
    </div>

    <!-- å¼¹çª—ç»“æ„ -->
    <div id="download-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>Want to play?</h3>
            <p>ç”±äºæ–‡ä»¶è¾ƒå¤§ï¼Œè¯·å‘é€é‚®ä»¶è‡³ä¸‹æ–¹åœ°å€è·å–æ¸¸æˆå‹ç¼©åŒ…ï¼š</p>
            <strong class="email-address">2407363427@qq.com</strong>
            <p class="en-hint">Please email me for the game build.</p>
        </div>
    </div>

    <script>
        /* =========================================
           1. å¼¹çª—é€»è¾‘
           ========================================= */
        const modal = document.getElementById('download-modal');
        const closeBtn = document.querySelector('.close-modal');
        const downloadBtns = document.querySelectorAll('.download-btn');

        downloadBtns.forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.preventDefault(); 
                modal.classList.add('show');
            });
        });

        closeBtn.addEventListener('click', () => {
            modal.classList.remove('show');
        });

        window.addEventListener('click', (e) => {
            if (e.target == modal) {
                modal.classList.remove('show');
            }
        });

        /* =========================================
           2. æ¸¸æˆå¡ç‰‡äº¤äº’é€»è¾‘
           ========================================= */
        // Game 1: åŠ¨ç‚¹P
        const cardP = document.getElementById('visual-p');
        const ballP = document.getElementById('ball-p');

        cardP.addEventListener('mousemove', (e) => {
            cardP.style.transition = 'none'; 
            ballP.classList.remove('dropping');
            const rect = cardP.getBoundingClientRect();
            const x = (e.clientX - rect.left) / rect.width * 2 - 1;
            const y = (e.clientY - rect.top) / rect.height * 2 - 1;
            cardP.style.transform = `perspective(1000px) rotateX(${-y * 10}deg) rotateY(${x * 10}deg)`;
            
            const offsetX = e.clientX - rect.left - rect.width / 2;
            const offsetY = e.clientY - rect.top - rect.height / 2;
            ballP.style.transform = `translate(calc(-50% + ${offsetX}px), calc(-50% + ${offsetY}px))`;
        });

        cardP.addEventListener('mouseleave', (e) => {
            cardP.style.transition = 'transform 0.5s ease';
            cardP.style.transform = `perspective(1000px) rotateX(0) rotateY(0)`;
            const rect = cardP.getBoundingClientRect();
            const offsetX = e.clientX - rect.left - rect.width / 2;
            const offsetY = e.clientY - rect.top - rect.height / 2;
            ballP.style.setProperty('--drop-x', `calc(-50% + ${offsetX}px)`);
            ballP.style.setProperty('--drop-y', `calc(-50% + ${offsetY}px)`);
            ballP.style.transform = ''; 
            ballP.classList.add('dropping');
        });

        // Game 2: äººï¼Œç§»åŠ¨ (é£˜æµ®å›¾æ ‡)
        function createParticle(type, container) {
            const icons = {
                'char-water': 'ğŸ’§',
                'char-wood': 'ğŸªµ',
                'char-fire': 'ğŸ”¥'
            };
            
            const el = document.createElement('div');
            el.classList.add('element-particle');
            el.innerText = icons[type];
            el.style.left = (Math.random() * 80 + 10) + '%';
            el.style.top = (Math.random() * 80 + 10) + '%';
            el.style.setProperty('--dx', (Math.random() * 100 - 50) + 'px');
            
            container.appendChild(el);
            setTimeout(() => el.remove(), 1500);
        }

        const humanVisual = document.getElementById('visual-human');
        const chars = document.querySelectorAll('.element-char');
        let particleInterval;

        chars.forEach(char => {
            char.addEventListener('mouseenter', () => {
                const type = char.classList[1]; 
                particleInterval = setInterval(() => {
                    createParticle(type, humanVisual);
                }, 100);
            });
            char.addEventListener('mouseleave', () => {
                clearInterval(particleInterval);
            });
        });

        // Game 3: å°çŒ«å’ª
        const cardCat = document.getElementById('visual-cat');
        const lens = document.getElementById('cat-lens');

        cardCat.addEventListener('mousemove', (e) => {
            const rect = cardCat.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            lens.style.clipPath = `circle(80px at ${x}px ${y}px)`;
        });

        cardCat.addEventListener('mouseleave', () => {
            lens.style.clipPath = `circle(0px at 50% 50%)`;
        });

        // Game 4: ç¨»è·å¼¹å°„ (ç®€æ˜“å¼¹çƒ)
        const inariVisual = document.getElementById('visual-inari');
        const inariBall = document.getElementById('inari-ball');
        let ballState = {
            x: 0, y: 0,
            vx: 0, vy: 0,
            isDragging: false,
            startX: 0, startY: 0
        };
        let animId;

        function resetBall() {
            const rect = inariVisual.getBoundingClientRect();
            ballState.x = rect.width / 2;
            ballState.y = rect.height - 50;
            ballState.vx = 0;
            ballState.vy = 0;
            updateBallPos();
        }
        
        function updateBallPos() {
            inariBall.style.left = ballState.x + 'px';
            inariBall.style.top = ballState.y + 'px';
        }

        window.addEventListener('load', resetBall);
        window.addEventListener('resize', resetBall);

        inariBall.addEventListener('mousedown', (e) => {
            e.stopPropagation(); 
            ballState.isDragging = true;
            ballState.startX = e.clientX;
            ballState.startY = e.clientY;
            ballState.vx = 0; 
            ballState.vy = 0;
            cancelAnimationFrame(animId); 
        });

        window.addEventListener('mousemove', (e) => {
            if (!ballState.isDragging) return;
            
            const dx = e.clientX - ballState.startX;
            const dy = e.clientY - ballState.startY;
            const dist = Math.sqrt(dx*dx + dy*dy);
            const maxDrag = 100;
            let moveX = dx;
            let moveY = dy;
            
            if (dist > maxDrag) {
                const angle = Math.atan2(dy, dx);
                moveX = Math.cos(angle) * maxDrag;
                moveY = Math.sin(angle) * maxDrag;
            }
            
            const rect = inariVisual.getBoundingClientRect();
            const originX = rect.width / 2;
            const originY = rect.height - 50;

            ballState.x = originX + moveX;
            ballState.y = originY + moveY;
            updateBallPos();
        });

        window.addEventListener('mouseup', (e) => {
            if (!ballState.isDragging) return;
            ballState.isDragging = false;
            
            const rect = inariVisual.getBoundingClientRect();
            const originX = rect.width / 2;
            const originY = rect.height - 50;
            
            const power = 0.2;
            ballState.vx = (originX - ballState.x) * power;
            ballState.vy = (originY - ballState.y) * power;
            
            physicsLoop();
        });

        function physicsLoop() {
            if (ballState.isDragging) return;

            const rect = inariVisual.getBoundingClientRect();
            const w = rect.width;
            const h = rect.height;
            const r = 15; 

            ballState.x += ballState.vx;
            ballState.y += ballState.vy;
            ballState.vx *= 0.98;
            ballState.vy *= 0.98;

            if (ballState.x < r) { ballState.x = r; ballState.vx *= -0.8; }
            if (ballState.x > w - r) { ballState.x = w - r; ballState.vx *= -0.8; }
            if (ballState.y < r) { ballState.y = r; ballState.vy *= -0.8; }
            if (ballState.y > h - r) { ballState.y = h - r; ballState.vy *= -0.8; }

            updateBallPos();

            if (Math.abs(ballState.vx) < 0.1 && Math.abs(ballState.vy) < 0.1) {
                return;
            }

            animId = requestAnimationFrame(physicsLoop);
        }

    </script>
</body>
</html>