<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Who is Evelyn? - About Me</title>
    
    <style>
        /* =========================================
           1. å­—ä½“ä¸åŸºç¡€è®¾ç½®
           ========================================= */
        @font-face {
            font-family: 'InstrumentSans-Regular';
            src: url('../assets/fonts/InstrumentSans-Regular.ttf') format('truetype');
        }
        @font-face {
            font-family: 'PuHuiTi';
            src: url('../assets/fonts/Alibaba-PuHuiTi-Light.otf') format('opentype');
        }
        @font-face {
            font-family: 'BebasNeue';
            src: url('../assets/fonts/BebasNeueRegular-gxj83.ttf') format('truetype');
        }

        :root {
            /* Day Mode å˜é‡ */
            --bg-color: #f4f4f4;
            --card-bg: #ffffff;
            --text-main: #333;
            --text-sub: #666;
            --accent: #264653;
            --highlight: #e9c46a;
            --bar-bg: #eee;
            --bar-fill: #2a9d8f;
        }

        /* Night Mode å˜é‡ */
        body.night-mode {
            --bg-color: #1a1a1a;
            --card-bg: #2a2a2a;
            --text-main: #f0f0f0;
            --text-sub: #aaa;
            --accent: #ff0055; /* è­¦å‘Šçº¢ */
            --highlight: #333;
            --bar-bg: #444;
            --bar-fill: #ff0055;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            font-family: 'InstrumentSans-Regular', 'PuHuiTi', sans-serif;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.5s ease;
        }

        /* å¯¼èˆª */
        .nav-back {
            position: fixed;
            top: 40px;
            left: 40px;
            z-index: 1000;
            text-decoration: none;
            font-size: 18px;
            font-weight: bold;
            color: var(--text-main);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: opacity 0.3s;
        }
        .nav-back:hover { opacity: 0.6; }

        /* =========================================
           2. æ¨¡å¼åˆ‡æ¢å¼€å…³ (Toggle)
           ========================================= */
        .toggle-wrapper {
            position: fixed;
            top: 40px;
            right: 40px;
            display: flex;
            align-items: center;
            gap: 15px;
            z-index: 1000;
        }
        
        .mode-label {
            font-family: 'BebasNeue', sans-serif;
            font-size: 20px;
            color: var(--text-main);
            letter-spacing: 1px;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        .switch input { opacity: 0; width: 0; height: 0; }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        /* é€‰ä¸­çŠ¶æ€ */
        input:checked + .slider { background-color: #ff0055; }
        input:checked + .slider:before { transform: translateX(26px); }

        /* =========================================
           3. èº«ä»½å¡ç‰‡ (Profile Card)
           ========================================= */
        .profile-card {
            width: 800px;
            height: 500px;
            background-color: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            display: flex;
            overflow: hidden;
            position: relative;
            transition: all 0.5s ease;
        }

        /* å·¦ä¾§ï¼šç…§ç‰‡åŒº */
        .card-visual {
            flex: 0.8;
            background-color: #e0e0e0;
            position: relative;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .avatar-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 0.3s;
        }
        
        /* ä¸¤ä¸ªå¤´åƒå åŠ ï¼Œé€šè¿‡ opacity åˆ‡æ¢ */
        #avatar-pro { opacity: 1; position: absolute; z-index: 2; }
        #avatar-cow { opacity: 0; position: absolute; z-index: 1; transform: scale(0.8); }

        /* å¤œé—´æ¨¡å¼å¤´åƒåˆ‡æ¢ */
        body.night-mode #avatar-pro { opacity: 0; }
        body.night-mode #avatar-cow { opacity: 1; transform: scale(1); transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }

        /* æ ‡ç­¾ */
        .status-tag {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.9);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            color: #333;
            z-index: 10;
        }

        /* å³ä¾§ï¼šä¿¡æ¯åŒº */
        .card-info {
            flex: 1.2;
            padding: 50px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .info-header h1 {
            font-family: 'BebasNeue', sans-serif;
            font-size: 64px;
            margin: 0;
            color: var(--text-main);
            line-height: 0.9;
            transition: color 0.5s;
        }
        .info-header h2 {
            font-family: 'InstrumentSans-Regular', sans-serif;
            font-size: 18px;
            color: var(--text-sub);
            margin: 5px 0 30px 0;
            font-weight: normal;
            transition: color 0.5s;
        }

        /* æŠ€èƒ½æ¡ */
        .skill-group {
            margin-bottom: 30px;
        }
        .skill-item {
            margin-bottom: 15px;
        }
        .skill-label {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: var(--text-main);
            margin-bottom: 5px;
            font-weight: bold;
        }
        .skill-bar-bg {
            width: 100%;
            height: 8px;
            background-color: var(--bar-bg);
            border-radius: 4px;
            overflow: hidden;
            transition: background-color 0.5s;
        }
        .skill-bar-fill {
            height: 100%;
            width: 0; /* JS æ§åˆ¶ */
            background-color: var(--bar-fill);
            border-radius: 4px;
            transition: width 0.3s ease-out, background-color 0.5s;
        }

        /* åº•éƒ¨æ“ä½œåŒº */
        .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }
        
        .action-btn {
            background: var(--text-main);
            color: var(--card-bg);
            border: none;
            padding: 12px 24px;
            border-radius: 30px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
        }
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .contact-link {
            color: var(--text-sub);
            text-decoration: none;
            font-size: 14px;
            border-bottom: 1px solid var(--text-sub);
            transition: color 0.5s;
        }

        /* =========================================
           4. ç‰¹æ•ˆ & å±è”½æç¤º
           ========================================= */
        .emoji-float {
            position: absolute;
            font-size: 24px;
            pointer-events: none;
            animation: floatUp 1.5s forwards;
            z-index: 2000;
        }
        @keyframes floatUp {
            0% { transform: translateY(0) scale(0.5); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateY(-100px) scale(1.2); opacity: 0; }
        }

        /* æ•…éšœæ–‡å­—æ•ˆæœ */
        .glitch-text {
            animation: glitch-anim 0.3s infinite;
        }
        @keyframes glitch-anim {
            0% { transform: translate(0) }
            20% { transform: translate(-2px, 2px) }
            40% { transform: translate(-2px, -2px) }
            60% { transform: translate(2px, 2px) }
            80% { transform: translate(2px, -2px) }
            100% { transform: translate(0) }
        }

        /* å±è”½å¼¹çª— */
        #block-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #000;
            color: #fff;
            z-index: 9999;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        .block-text {
            font-family: 'BebasNeue', sans-serif;
            font-size: 60px;
            margin-bottom: 20px;
            color: #ff0055;
        }
        .block-sub {
            font-family: 'PuHuiTi', sans-serif;
            font-size: 18px;
            color: #fff;
        }
        /* å€’è®¡æ—¶æ ·å¼ */
        #block-timer {
            margin-top: 20px;
            font-family: 'InstrumentSans-Regular', monospace;
            font-size: 16px;
            color: #ff0055;
            letter-spacing: 1px;
            font-weight: bold;
        }

    </style>
</head>
<body>

    <!-- å±è”½æç¤ºå±‚ -->
    <div id="block-overlay">
        <div class="block-text">NOT FUNNY!</div>
        <div class="block-sub">ä¸å¥½ç¬‘ï¼Œå±è”½ä½ ä¸€æ™šä¸Šã€‚</div>
        <div id="block-timer"></div>
        <!-- æ–°å¢ï¼šè¿”å›ä¸»é¡µæŒ‰é’® -->
        <button id="block-back-btn" class="action-btn" style="margin-top: 30px; border: 1px solid #fff; background: transparent; color: #fff;">
            â† Back to Home
        </button>
    </div>

    <a href="../index.html" class="nav-back">â† BACK</a>

    <!-- æ¨¡å¼åˆ‡æ¢ -->
    <div class="toggle-wrapper">
        <span class="mode-label" id="mode-text">DESIGNER MODE</span>
        <label class="switch">
            <input type="checkbox" id="mode-switch">
            <span class="slider"></span>
        </label>
    </div>

    <!-- èº«ä»½å¡ç‰‡ -->
    <div class="profile-card" id="card">
        
        <!-- å·¦ä¾§ï¼šå¤´åƒ -->
        <div class="card-visual">
            <div class="status-tag" id="status-tag">OPEN TO WORK</div>
            <!-- ä¸“ä¸šå¤´åƒ -->
            <img src="../assets/images/self.png" id="avatar-pro" class="avatar-img" alt="Pro" onerror="this.src='https://placehold.co/400x500/ddd/333?text=Photo+Missing'">
            <!-- ç‰›é©¬å¤´åƒ -->
            <img src="../assets/images/center-avatar.png" id="avatar-cow" class="avatar-img" alt="Cow">
        </div>

        <!-- å³ä¾§ï¼šä¿¡æ¯ -->
        <div class="card-info">
            <div class="info-header">
                <h1 id="name-text">EVELYN HE</h1>
                <h2 id="role-text">Interdisciplinary Designer</h2>
            </div>

            <div class="skill-group">
                
                <!-- æŠ€èƒ½ 1 -->
                <div class="skill-item">
                    <div class="skill-label">
                        <span id="skill-1-name">Visual Design</span>
                        <span id="skill-1-val">90%</span>
                    </div>
                    <div class="skill-bar-bg">
                        <div class="skill-bar-fill" id="skill-1-bar" style="width: 90%;"></div>
                    </div>
                </div>

                <!-- æŠ€èƒ½ 2 -->
                <div class="skill-item">
                    <div class="skill-label">
                        <span id="skill-2-name">Interaction</span>
                        <span id="skill-2-val">85%</span>
                    </div>
                    <div class="skill-bar-bg">
                        <div class="skill-bar-fill" id="skill-2-bar" style="width: 85%;"></div>
                    </div>
                </div>

                <!-- æŠ€èƒ½ 3 (Sanity) -->
                <div class="skill-item">
                    <div class="skill-label">
                        <span id="skill-3-name">Sanity</span>
                        <span id="skill-3-val">100%</span>
                    </div>
                    <div class="skill-bar-bg">
                        <div class="skill-bar-fill" id="skill-3-bar" style="width: 100%;"></div>
                    </div>
                </div>

            </div>

            <div class="card-footer">
                <button class="action-btn" id="action-btn">
                    <span id="btn-icon">â˜•</span> <span id="btn-text">Buy me a coffee</span>
                </button>
                <a href="mailto:2407363427@qq.com" class="contact-link">2407363427@qq.com</a>
            </div>
        </div>
    </div>

    <!-- éŸ³æ•ˆ -->
    <audio id="sfx-switch" src="../assets/audio/click.mp3"></audio>
    <audio id="sfx-error" src="../assets/audio/error.mp3"></audio>

    <script>
        // 0. è®¿é—®æƒé™æ£€æŸ¥ (å±è”½é€»è¾‘)
        const blockUntil = localStorage.getItem('evelyn_blocked_until');
        const overlay = document.getElementById('block-overlay');
        const timerText = document.getElementById('block-timer');
        const backBtn = document.getElementById('block-back-btn');
        
        if (blockUntil && Date.now() < parseInt(blockUntil)) {
            overlay.style.display = 'flex';
            
            // ç»‘å®šè¿”å›æŒ‰é’®äº‹ä»¶
            backBtn.addEventListener('click', () => {
                window.location.href = '../index.html';
            });
            
            // å€’è®¡æ—¶é€»è¾‘
            const updateCount = () => {
                const now = Date.now();
                const end = parseInt(blockUntil);
                const diff = end - now;
                
                if (diff <= 0) {
                    // è§£å°
                    localStorage.removeItem('evelyn_blocked_until');
                    location.reload(); 
                    return;
                }
                
                const m = Math.floor(diff / 60000);
                const s = Math.floor((diff % 60000) / 1000);
                timerText.innerText = ` ${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
            };
            
            updateCount(); // ç«‹å³æ‰§è¡Œä¸€æ¬¡
            setInterval(updateCount, 1000); // æ¯ç§’æ›´æ–°
            
            throw new Error("User is blocked."); // åœæ­¢åç»­è„šæœ¬æ‰§è¡Œï¼Œå¡åœ¨é»‘å±
        }

        const modeSwitch = document.getElementById('mode-switch');
        const body = document.body;
        const actionBtn = document.getElementById('action-btn');
        const btnIcon = document.getElementById('btn-icon');
        const sfxSwitch = document.getElementById('sfx-switch');
        const sfxError = document.getElementById('sfx-error');

        // æ–‡æœ¬å…ƒç´ 
        const modeText = document.getElementById('mode-text');
        const statusTag = document.getElementById('status-tag');
        const nameText = document.getElementById('name-text');
        const roleText = document.getElementById('role-text');
        const btnText = document.getElementById('btn-text');

        // æŠ€èƒ½æ¡å…ƒç´ 
        const s1n = document.getElementById('skill-1-name');
        const s1v = document.getElementById('skill-1-val');
        const s1b = document.getElementById('skill-1-bar');

        const s2n = document.getElementById('skill-2-name');
        const s2v = document.getElementById('skill-2-val');
        const s2b = document.getElementById('skill-2-bar');

        const s3n = document.getElementById('skill-3-name');
        const s3v = document.getElementById('skill-3-val');
        const s3b = document.getElementById('skill-3-bar');

        // çŠ¶æ€å˜é‡
        let currentSanity = 100;

        // æ¨¡å¼æ•°æ®
        const data = {
            day: {
                mode: "DESIGNER MODE",
                status: "OPEN TO WORK",
                name: "EVELYN HE",
                role: "Interdisciplinary Designer",
                btn: "Buy me a coffee",
                icon: "â˜•",
                skills: [
                    { name: "Visual Design", val: "90%", w: "90%" },
                    { name: "Interaction", val: "85%", w: "85%" }
                ]
            },
            night: {
                mode: "COW-HORSE MODE",
                status: "SOS",
                name: "NIU MA",
                role: "Full-time Overtime Machine",
                btn: "Mock me (å˜²ç¬‘)",
                icon: "ğŸ¤¡",
                skills: [
                    { name: "Ctrl + C / V", val: "999%", w: "100%" },
                    { name: "Back Pain", val: "Level Max", w: "100%" }
                ]
            }
        };

        // æ›´æ–° Sanity æ¡
        function updateSanityUI() {
            s3b.style.width = currentSanity + '%';
            s3v.innerText = currentSanity + '%';
            
            // å˜è‰²é€»è¾‘
            if (currentSanity < 30) {
                s3b.style.backgroundColor = '#ff0055'; // å±é™©çº¢
            } else if (currentSanity < 60) {
                s3b.style.backgroundColor = '#e9c46a'; // è­¦å‘Šé»„
            } else {
                s3b.style.backgroundColor = getComputedStyle(document.body).getPropertyValue('--bar-fill');
            }
        }

        // åˆ‡æ¢é€»è¾‘
        modeSwitch.addEventListener('change', () => {
            if (sfxSwitch) sfxSwitch.play().catch(()=>{});

            if (modeSwitch.checked) {
                // è¿›å…¥ Night Mode (ç‰›é©¬æ¨¡å¼)
                body.classList.add('night-mode');
                updateContent(data.night);
                
                // Sanity åˆå§‹æš´è·Œ
                currentSanity = 40; 
                updateSanityUI();

                // æ•…éšœæ•ˆæœ
                nameText.classList.add('glitch-text');
                setTimeout(() => nameText.classList.remove('glitch-text'), 500);

            } else {
                // å›åˆ° Day Mode
                body.classList.remove('night-mode');
                updateContent(data.day);
                
                // Sanity æ¢å¤
                currentSanity = 100;
                updateSanityUI();
            }
        });

        function updateContent(d) {
            modeText.innerText = d.mode;
            statusTag.innerText = d.status;
            nameText.innerText = d.name;
            roleText.innerText = d.role;
            btnText.innerText = d.btn;
            btnIcon.innerText = d.icon;

            // æ›´æ–°å‰ä¸¤ä¸ªæŠ€èƒ½
            s1n.innerText = d.skills[0].name; s1v.innerText = d.skills[0].val; s1b.style.width = d.skills[0].w;
            s2n.innerText = d.skills[1].name; s2v.innerText = d.skills[1].val; s2b.style.width = d.skills[1].w;
        }

        // æŒ‰é’®äº¤äº’é€»è¾‘
        actionBtn.addEventListener('click', (e) => {
            const isNight = modeSwitch.checked;
            
            // 1. ç”Ÿæˆè¡¨æƒ…åŒ…
            const emojis = isNight ? ['ğŸ¤¡', 'ğŸ‘', 'ğŸ˜‚', 'ğŸ‘»', 'ğŸ’©'] : ['â˜•', 'â¤ï¸', 'ğŸ’Š', 'âš¡', 'ğŸ¥ª'];
            const el = document.createElement('div');
            el.innerText = emojis[Math.floor(Math.random() * emojis.length)];
            el.classList.add('emoji-float');
            
            const rect = actionBtn.getBoundingClientRect();
            el.style.left = rect.left + rect.width/2 + 'px';
            el.style.top = rect.top + 'px';
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 1500);

            // 2. Sanity é€»è¾‘
            if (isNight) {
                // å˜²ç¬‘ -> æ‰£è¡€
                currentSanity -= 10;
                if (currentSanity < 0) currentSanity = 0;
                updateSanityUI();

                // æ’­æ”¾é”™è¯¯éŸ³æ•ˆ
                if (sfxError && Math.random() > 0.5) {
                    sfxError.currentTime = 0;
                    sfxError.play().catch(()=>{});
                }
                
                // è§¦å‘å±è”½
                if (currentSanity <= 10) {
                    triggerBlock();
                }

            } else {
                // æŠ•å–‚ -> å›è¡€
                if (currentSanity < 100) {
                    currentSanity += 10;
                    if(currentSanity > 100) currentSanity = 100;
                    updateSanityUI();
                }
            }
        });

        function triggerBlock() {
            // æ˜¾ç¤ºé®ç½©
            document.getElementById('block-overlay').style.display = 'flex';
            
            // ç»‘å®šè¿”å›æŒ‰é’®äº‹ä»¶ (é˜²æ­¢é¦–æ¬¡è§¦å‘æ—¶æ²¡ç»‘å®š)
            document.getElementById('block-back-btn').addEventListener('click', () => {
                window.location.href = '../index.html';
            });

            // å†™å…¥ LocalStorage (å°ç¦ 5 åˆ†é’Ÿ)
            const banTime = Date.now() + 5 * 60 * 1000;
            localStorage.setItem('evelyn_blocked_until', banTime);

            // ç«‹å³æ˜¾ç¤ºå€’è®¡æ—¶åˆå§‹çŠ¶æ€
            if(timerText) timerText.innerText = "05:00";

            // å»¶è¿Ÿè·³è½¬ (Kick out)
            setTimeout(() => {
                window.location.href = '../index.html';
            }, 2500);
        }

    </script>
</body>
</html>