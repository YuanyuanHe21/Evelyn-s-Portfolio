<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading... - Evelyn's Portfolio</title>
    <style>
        /* =========================================
           1. å­—ä½“å®šä¹‰
           ========================================= */
        @font-face {
            font-family: 'InstrumentSans-Regular';
            src: url('assets/fonts/InstrumentSans-Regular.ttf') format('truetype');
        }
        @font-face {
            font-family: 'PuHuiTi';
            src: url('assets/fonts/Alibaba-PuHuiTi-Light.otf') format('opentype');
        }
        @font-face {
            font-family: 'BebasNeue';
            src: url('assets/fonts/BebasNeueRegular-gxj83.ttf') format('truetype');
        }

        /* =========================================
           2. åŸºç¡€æ ·å¼
           ========================================= */
        body {
            margin: 0;
            padding: 0;
            background-color: #ffffff;
            font-family: 'InstrumentSans-Regular', 'PuHuiTi', sans-serif;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: progress; /* åŠ è½½ä¸­é¼ æ ‡æ ·å¼ */
        }

        /* é¡¶éƒ¨ä¿¡æ¯ */
        .header-info {
            position: absolute;
            top: 40px;
            left: 40px;
            font-size: 12px;
            line-height: 1.5;
            color: #333;
            z-index: 10;
        }

        /* çŠ¶æ€æ–‡æœ¬ (I AM FINE -> I AM CRAZY) */
        .status-text {
            font-weight: bold;
            font-size: 16px;
            margin-top: 10px;
            display: block;
        }

        /* å³ä¸Šè§’çš„å¤§å­— (é™ -> ç–¯) */
        .kanji-status {
            position: absolute;
            top: 30px;
            right: 40px;
            font-family: 'PuHuiTi', sans-serif; /* ä¹Ÿå¯ä»¥ç”¨æ›´ä¹¦æ³•çš„å­—ä½“ */
            font-size: 80px;
            font-weight: bold;
            color: #000;
            z-index: 10;
            transition: transform 0.2s;
        }

        /* =========================================
           3. ä¸­å¿ƒå†…å®¹åŒº
           ========================================= */
        .center-stage {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 40px;
            width: 100%;
        }

        /* å·¦å³çš„å¤§æ ‡é¢˜ */
        .hero-text {
            font-family: 'BebasNeue', sans-serif;
            font-size: 60px;
            color: #000;
            letter-spacing: 2px;
        }

        /* çŒ«å’ªå®¹å™¨ */
        .cat-container {
            position: relative;
            width: 300px;
            height: 300px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .cat-img {
            width: 100%;
            height: auto;
            object-fit: contain;
            transition: opacity 0.1s, transform 0.1s;
        }

        /* ç–¯çŒ«é»˜è®¤éšè— */
        #cat-crazy {
            position: absolute;
            top: 0; left: 0;
            opacity: 0;
            display: none; /* åˆå§‹å®Œå…¨ä¸æ¸²æŸ“ */
        }

        /* è¿›åº¦ç™¾åˆ†æ¯” */
        .loading-percent {
            position: absolute;
            bottom: -60px;
            font-family: 'BebasNeue', sans-serif;
            font-size: 24px;
            color: #000;
        }

        /* =========================================
           4. åº•éƒ¨ç‰ˆæƒä¸å›¾æ ‡
           ========================================= */
        .footer-info {
            position: absolute;
            bottom: 40px;
            left: 40px;
            font-size: 12px;
            color: #666;
        }

        .loading-icon {
            position: absolute;
            bottom: 40px;
            right: 40px;
            width: 30px;
            height: 30px;
            border: 4px solid #000;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* =========================================
           5. ç–¯ç™«çŠ¶æ€ç‰¹æ•ˆç±» (CSS Classes)
           ========================================= */
        
        /* å±å¹•æ•…éšœ/æŠ–åŠ¨ */
        .body-shake {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) infinite both;
        }

        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        /* è¿›å…¥æŒ‰é’® (åŠ è½½å®Œæˆåæ˜¾ç¤º) */
        .enter-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0); /* é€æ˜é®ç½© */
            z-index: 100;
            cursor: pointer; /* å˜æ‰‹æŒ‡ */
            display: none;
            justify-content: center;
            align-items: center;
        }
        
        /* ç‚¹å‡»æç¤º */
        .click-hint {
            position: absolute;
            bottom: 20%;
            background: #000;
            color: #fff;
            padding: 10px 20px;
            font-size: 18px;
            font-weight: bold;
            transform: rotate(-5deg);
            animation: pulse 0.5s infinite alternate;
        }

        @keyframes pulse {
            from { transform: rotate(-5deg) scale(1); }
            to { transform: rotate(-5deg) scale(1.1); }
        }

        /* é¡µé¢é€€å‡ºåŠ¨ç”» */
        .page-explode {
            animation: explode 0.8s forwards;
            pointer-events: none;
        }

        @keyframes explode {
            0% { transform: scale(1); opacity: 1; filter: blur(0); }
            50% { transform: scale(1.5); opacity: 0.5; filter: blur(10px); }
            100% { transform: scale(2); opacity: 0; filter: blur(20px); }
        }

    </style>
</head>
<body>

    <!-- é¡¶éƒ¨ä¿¡æ¯ -->
    <div class="header-info">
        Entertainment Design @ Creative Direction by Evelyn-2025<br>
        Small compilation of unposted works, some course work... some personal work.<br>
        COPYRIGHT @ Evelyn 2025
        <span class="status-text" id="status-text">I AM FINE.</span>
    </div>

    <!-- å³ä¸Šè§’æ±‰å­— -->
    <div class="kanji-status" id="kanji">é™</div>

    <!-- ä¸­å¿ƒåŒºåŸŸ -->
    <div class="center-stage" id="stage">
        <div class="hero-text">EVELYN 'S</div>
        
        <div class="cat-container">
            <!-- å¹³é™çŒ« -->
            <img src="assets/images/cat-calm.png" id="cat-calm" class="cat-img" alt="Calm Cat" 
                 onerror="this.src='https://placehold.co/300x300/transparent/000?text=ğŸ±+Calm';">
            <!-- ç–¯ç™«çŒ« -->
            <img src="assets/images/cat-crazy.png" id="cat-crazy" class="cat-img" alt="Crazy Cat" 
                 onerror="this.src='https://placehold.co/300x300/transparent/000?text=ğŸ™€+CRAZY';">
            
            <!-- è¿›åº¦æ•°å­— -->
            <div class="loading-percent" id="percent">0%</div>
        </div>

        <div class="hero-text">PORTFOLIO</div>
    </div>

    <!-- åº•éƒ¨ä¿¡æ¯ -->
    <div class="footer-info">Copyright @ 2025 Evelyn. All rights reserved.</div>
    <div class="loading-icon" id="spinner"></div>

    <!-- äº¤äº’é®ç½© (åŠ è½½å®Œæˆåå‡ºç°) -->
    <div class="enter-overlay" id="enter-btn">
        <div class="click-hint">CLICK TO GET CRAZY!</div>
    </div>

    <!-- éŸ³æ•ˆèµ„æº -->
    <audio id="sfx-glitch" src="assets/audio/glitch.mp3" preload="auto"></audio>
    <audio id="sfx-explode" src="assets/audio/explode.mp3" preload="auto"></audio>

    <script>
        // é…ç½®
        const totalDuration = 3000; // æ¨¡æ‹ŸåŠ è½½æ€»æ—¶é•¿ (3ç§’)
        const frameRate = 30; // åˆ·æ–°ç‡
        const increment = 100 / (totalDuration / (1000 / frameRate));
        
        let progress = 0;
        const percentEl = document.getElementById('percent');
        const kanjiEl = document.getElementById('kanji');
        const statusTextEl = document.getElementById('status-text');
        const catCalm = document.getElementById('cat-calm');
        const catCrazy = document.getElementById('cat-crazy');
        const spinner = document.getElementById('spinner');
        const enterBtn = document.getElementById('enter-btn');
        const body = document.body;
        
        // éŸ³é¢‘å…ƒç´ 
        const sfxGlitch = document.getElementById('sfx-glitch');
        const sfxExplode = document.getElementById('sfx-explode');

        // æ¨¡æ‹ŸåŠ è½½å¾ªç¯
        const interval = setInterval(() => {
            progress += increment;
            
            // éšæœºå¡é¡¿ä¸€ä¸‹ï¼Œæ¨¡æ‹ŸçœŸå®åŠ è½½
            if(Math.random() > 0.8) progress -= 0.5; 

            // æ›´æ–°æ–‡å­—
            let displayProgress = Math.floor(progress);
            if (displayProgress > 100) displayProgress = 100;
            percentEl.innerText = displayProgress + '%';

            // âš¡ï¸ é˜¶æ®µ 1: 80% æ—¶å¼€å§‹ä¸ç¨³å®š
            if (displayProgress > 80) {
                // å¶å°”é—ªç°ç–¯çŒ«
                if (Math.random() > 0.7) {
                    catCalm.style.opacity = 0;
                    catCrazy.style.display = 'block';
                    catCrazy.style.opacity = 1;
                    kanjiEl.innerText = "ç–¯"; // é—ªçƒæ±‰å­—
                    
                    // æ’­æ”¾æ•…éšœéŸ³æ•ˆ
                    if (sfxGlitch) {
                        sfxGlitch.currentTime = 0;
                        sfxGlitch.play().catch(() => {}); // æ•è·é”™è¯¯é˜²æ­¢æŠ¥é”™
                    }
                } else {
                    catCalm.style.opacity = 1;
                    catCrazy.style.display = 'none';
                    catCrazy.style.opacity = 0;
                    kanjiEl.innerText = "é™";
                }
                // å±å¹•è½»å¾®æŠ–åŠ¨
                body.style.transform = `translate(${Math.random()*2 - 1}px, ${Math.random()*2 - 1}px)`;
            }

            // âœ… é˜¶æ®µ 2: åŠ è½½å®Œæˆ
            if (progress >= 100) {
                clearInterval(interval);
                finishLoading();
            }

        }, 1000 / frameRate);

        function finishLoading() {
            // 1. å¼ºåˆ¶è®¾ä¸º 100%
            percentEl.innerText = ''; // éšè—è¿›åº¦æ•°å­—
            
            // 2. çŠ¶æ€å½»åº•åˆ‡æ¢
            catCalm.style.display = 'none';
            catCrazy.style.display = 'block';
            catCrazy.style.opacity = 1;
            
            kanjiEl.innerText = "ç–¯";
            statusTextEl.innerText = "I AM CRAZY.";
            
            // 3. è§†è§‰ç‰¹æ•ˆ
            body.style.transform = 'none'; // åœæ­¢ä½ç§»
            body.classList.add('body-shake'); //ä»¥æ­¤CSSåŠ¨ç”»ä»£æ›¿
            body.style.backgroundColor = '#f4f4f4'; // èƒŒæ™¯ç¨å¾®å˜ç°ä¸€ç‚¹å¢åŠ æ°›å›´
            
            // 4. éšè—åŠ è½½åœˆï¼Œæ˜¾ç¤ºè¿›å…¥æŒ‰é’®
            spinner.style.display = 'none';
            enterBtn.style.display = 'flex';
            body.style.cursor = 'pointer';
        }

        // ç‚¹å‡»è¿›å…¥ç›®æ ‡é¡µé¢ (ä¿®æ”¹ä¸ºè¯»å–å‚æ•°)
        enterBtn.addEventListener('click', () => {
            // æ’­æ”¾çˆ†ç‚¸éŸ³æ•ˆ
            if (sfxExplode) {
                sfxExplode.play().catch(() => {});
            }

            // æ’­æ”¾çˆ†ç‚¸/é€€å‡ºåŠ¨ç”»
            document.body.classList.add('page-explode');
            
            // è·å– URL ä¸­çš„ dest å‚æ•°
            const params = new URLSearchParams(window.location.search);
            const destination = params.get('dest') || 'index.html'; // å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œé»˜è®¤å›ä¸»é¡µ

            // å»¶è¿Ÿè·³è½¬
            setTimeout(() => {
                window.location.href = destination;
            }, 700);
        });

    </script>
</body>
</html>